#!/usr/bin/osascript
# Source: https://github.com/kortina/dotfiles/blob/master/bin/dismiss_notification_center.applescript

# via:
# https://apple.stackexchange.com/questions/408019/dismiss-macos-big-sur-notifications-with-keyboard

# define a function we can call recursively
on dismiss_notification_center(n)
    log "dismiss_notification_center: " & n
    set performedAction to false
    # activate application "NotificationCenter"
    tell application "System Events"
        tell process "Notification Center"
            try
                # when there are no notifications, this may result in:
                # 'System Events got an error: Can't get window "Notification Center" of process "Notification Center".'
                # This is our recursion base case.
                # tell group 1 of UI element 1 of scroll area 1 of window "Notification Center" of "Notification Center"
                tell group 1 of UI element 1 of scroll area 1 of window "Notification Center"
                    try 
                      perform first action whose description is "Clear All"
                      set performedAction to true
                    on error e
                      perform first action whose description is "Close"
                      return
                    end try
                end tell
            on error e
                # log the error to the console:
                log quoted form of e
                return
            end try
        end tell
    end tell
end dismiss_notification_center

# first call to recursive function:
dismiss_notification_center(0)

